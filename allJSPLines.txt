<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="ISO-8859-1">
<title>Something Went Wrong</title>
<link rel="stylesheet" type="text/css" href="CSS/error.css">
</head>
<body>
</body>
</html><%--
   Created by IntelliJ IDEA.
   User: Matt
   Date: 1/20/2018
   Time: 9:57 AM
   To change this template use File | Settings | File Templates.
   --%>
<%@ page contentType="text/html;charset=UTF-8" language="java"%>
<html>
   <head>
      <title>User Login</title>
      <link rel="stylesheet" type="text/css" href="CSS/footer.css">
      <link rel="stylesheet" type="text/css" href="CSS/customer.css">
      <link
         href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
         rel="stylesheet"
         integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
         crossorigin="anonymous">
         <script src='https://www.google.com/recaptcha/api.js'></script>
      <script>
         function validateForm() {
         	var x = document.forms["userForm"]["email"].value;
         	var y = document.forms["userForm"]["password"].value;
         	if (x === "") {
         		alert("Username must be filled out");
         		return false;
         	}
         
         	if (y === "") {
         		alert("Password must be filled out");
         		return false;
         	}
         }
      </script>
   </head>
   <body background="pics/background1.jpg">
      <header>
         <img src="pics/imaxBanner1.jpg" style="width: 100%" />
         <nav>
            <a href="Registration.jsp">Register</a>
         </nav>
      </header>
      <main role="main" class="container">
         <div id="loginForm">
            <form id="loginForm" action="Login" onsubmit="return validateForm()"
               method="post" name="userForm">
               <fieldset>
                  <legend>Login</legend>
                  <b>E-mail:</b><br> <input type="email" name="email" value="${cookie.userId.value}"> 
                  <span
                     style="color: red">${emailError}</span><br> 
                     <b>Password:</b><br>
                  <input type="password" name="password"> 
                  <span style="color: red">${pwError}</span><br>
                     <input type="checkbox" name="rememberMe">Remember Me<br>
                     
                     <div class="g-recaptcha" data-sitekey="6LeUP08UAAAAAHQARV0ypp_V0OWHYl5OyXZlrT4H"></div>
                     <input type="submit" name="login">
               </fieldset>
            </form>
         </div>
      </main>
      <footer class="footer">
         <div class="container">
            <span style="font: Britannic Bold; font-size: 12px; color: white">IMAX®
            and The IMAX Experience® are trademarks of IMAX Corporation.</span><br>
            <span style="font: Britannic Bold; font-size: 12px; color: white">
            <b>TO THE MAX!</b></span>
         </div>
      </footer>
   </body>
</html><%--
   Created by IntelliJ IDEA.
   User: Matt
   Date: 1/20/2018
   Time: 10:20 AM
   To change this template use File | Settings | File Templates.
   --%>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<html>
   <head>
      <title>User Registration</title>
      <link
         href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
         rel="stylesheet"
         integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
         crossorigin="anonymous">
      <link rel="stylesheet" type="text/css" href="CSS/customer.css">
      
            <script>
         function validateForm() {
         	var fName = document.forms["userForm"]["fName"].value;
         	var lName = document.forms["userForm"]["lName"].value;
         	var email = document.forms["userForm"]["email"].value;
         	var password = document.forms["userForm"]["password"].value;
         	if (fName === "" || lName === "" || email[0] === "") {
         		alert("All fields must be filled out!");
         		return false;
         	}
         }
      </script>
   </head>
   <body>
      <header>
         <img src="pics/imaxBanner1.jpg" style="width: 100%" />
         <nav>
            <a href="Login.jsp">Back</a>
         </nav>
      </header>
      <div class="main">
         <div id="regForm">
            <fieldset style="width: 50vw">
               <legend>User Registration:</legend>
               <form action="Registration" method="post" name="userForm"
               onSubmit="return validateForm()">
                  <b>First Name:</b><br>
                  <input type="text" name="fName"><br>
                  <b>Last Name:</b><br>
                  <input type="text" name="lName"><br>
                  <b>E-mail:</b><br>
                  <input type="email" name="email"><br>
                  <b>Re-Enter Email:</b><br>
                  <input type="email" name="email"><span style="color: red">${emailError}</span><br>
                  <b>Password:</b><br>
                  <input type="password" name="password"><br>
                  <b>Re-Enter Password:</b><br>
                  <input type="password" name="password"><span style="color: red">${pwError}</span><br>
                  <input type="submit">
               </form>
            </fieldset>
         </div>
      </div>
      <footer class="footer">
         <div class="container">
            <span style="font: Britannic Bold; font-size: 12px; color: white">IMAX®
            and The IMAX Experience® are trademarks of IMAX Corporation.</span><br>
            <span style="font: Britannic Bold; font-size: 12px; color: white">
            <b>TO THE MAX!</b></span>
         </div>
      </footer>
   </body>
</html><%--
   Created by IntelliJ IDEA.
   User: Matt
   Date: 1/20/2018
   Time: 10:15 AM
   To change this template use File | Settings | File Templates.
   --%>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<html>
   <head>
      <title>Title</title>
      <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" 
         integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" 
         crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/CSS/customer.css">
   </head>
   <body>
      <header>
         <img src="${pageContext.request.contextPath}/pics/imaxBanner1.jpg" style="width: 100%" />
         <nav>
         	<a href="Login">Home</a> 
         	<a href="ViewOrders">View Orders</a> 
         	<a href="UpdateShoppingCart">View Cart</a> 
         	<a href="LogOut">Log Out</a>
      	 </nav>
      </header>
      <h1>${user.firstName} ${user.lastName}</h1>
      <table class="table table-bordered table-striped">
         <thead>
            <th>Order #</th>
            <th>Movie</th>
            <th># of Tickets</th>
            <th>Total</th>
            <th>Theater Room</th>
         </thead>
         <tbody>
            <tr>
               <td> ${movieOrder.id} </td>
               <td>${movieOrder.movieShowing.movie.title}</td>
               <td>${movieOrder.ticketQuantity}</td>
               <td>
               $<fmt:formatNumber type="number" minFractionDigits="2" 
               maxFractionDigits="2" 
               value="${movieOrder.ticketQuantity * movieOrder.movieShowing.cost}" />
               </td>
               <td>${movieOrder.movieShowing.showroom.theater.name}</td>
            </tr>
         </tbody>
      </table>
      <br>
      <h2 style="color:red">${cancellationMsg}</h3>
      <p>
       $<fmt:formatNumber type="number" minFractionDigits="2" 
       maxFractionDigits="2" 
       value="${movieOrder.ticketQuantity * movieOrder.movieShowing.cost}" />           
       will be refunded via deposit into the account linked to your credit/debit card </p>
      <footer class="footer">
         <div class="container">
            <span style="font: Britannic Bold; font-size: 12px; color: white">IMAX®
            and The IMAX Experience® are trademarks of IMAX Corporation.</span><br>
            <span style="font: Britannic Bold; font-size: 12px; color: white">
            <b>TO THE MAX!</b></span>
         </div>
      </footer>
   </body>
</html><%--
   Created by IntelliJ IDEA.
   User: Matt
   Date: 1/20/2018
   Time: 10:14 AM
   To change this template use File | Settings | File Templates.
   --%>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<html>
   <head>
      <title>Title</title>
      <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" 
         integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" 
         crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/CSS/customer.css">
   </head>
   <body>
      <header>
         <img src="${pageContext.request.contextPath}/pics/imaxBanner1.jpg" style="width: 100%" />
         <nav>
         	<a href="Login">Home</a> 
         	<a href="ViewOrders">View Orders</a> 
         	<a href="UpdateShoppingCart">View Cart</a> 
         	<a href="LogOut">Log Out</a>
      	 </nav>
      </header>
      <h1>${user.firstName} ${user.lastName}</h1>
      <table class="table table-bordered table-striped">
         <thead>
            <th>Order #</th>
            <th>Movie</th>
            <th># of Tickets</th>
            <th>Total</th>
            <th>Theater Room</th>
         </thead>
         <tbody>
            <tr>
               <td> ${movieOrder.id} </td>
               <td>${movieOrder.movieShowing.movie.title}</td>
               <td>${movieOrder.ticketQuantity}</td>
               <td>
               $<fmt:formatNumber type="number" minFractionDigits="2" 
               maxFractionDigits="2" 
               value="${movieOrder.ticketQuantity * movieOrder.movieShowing.cost}" />
               </td>
               <td>${movieOrder.movieShowing.showroom.theater.name}</td>
            </tr>
         </tbody>
      </table>
      <br>
      <form action="CancelOrderTransaction" method="post">
        <input type="submit" name="button" value="Confirm Cancelation">
      </form>
      <form action="ManageOrder" method="post">
        <input type="submit" name="discard" value="Discard Cancellation">
      </form>
      <footer class="footer">
         <div class="container">
            <span style="font: Britannic Bold; font-size: 12px; color: white">IMAX®
            and The IMAX Experience® are trademarks of IMAX Corporation.</span><br>
            <span style="font: Britannic Bold; font-size: 12px; color: white">
            <b>TO THE MAX!</b></span>
         </div>
      </footer>
   </body>
</html><%-- TODO: The page must display all information on the transaction page except the credit card information. --%>
<%--
   Created by IntelliJ IDEA.
   User: Matt
   Date: 1/20/2018
   Time: 10:10 AM
   To change this template use File | Settings | File Templates.
   --%>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib uri = "http://java.sun.com/jsp/jstl/core" prefix = "c" %>
<html>
   <head>
      <title>Payment</title>
      <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" 
         integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" 
         crossorigin="anonymous">
         <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/CSS/customer.css">
  <script>
    function validateForm()
    {
        var a=$("#fName").val();
        var b=$("#lName").val();
        var c=$("#ccNum").val();
        var d=$("#ccCode").val();
        var e=$("#billStreet").val();
        var f=$("#billCity").val();;
        var g=$("#billZip").val();;
        var h=$("#shipStreet").val();
        var i=$("#shipCity").val();;
        var j=$("#shipZip").val();;
        var k=$("#passAuth").val();;

        if (a==null || a=="",b==null || b=="",c==null || c=="",d==null || d=="",
        	e==null || e=="",f==null || f=="",g==null || g=="",h==null || h=="",
        	i==null || i=="",j==null || j=="",k==null || k=="")
        {
            alert("Please Fill All Fields");
            return false;
        }
        else if (!passwordIsCorrect()) {
        	alert("INVALID PASSWORD")
        	return false;
        }
        else {
        	confirm();
        }
    }
    
    function passwordIsCorrect() {
    	$.post("/MovieReservationSystem/PasswordAuthServlet", { 
    		passAuth: $("#passAuth").val() },
    		function(data, status) {
    			if(data == 0){
    				return false;				
    			}
    			if(data == 1){
    				return true;
    			}
    		});
    	/* return false; */
    }
    
    function confirm(){
    	
		$.post("/Bank/BankingServlet", {
			fName: $("#fName").val(),
			lName: $("#lName").val(),
			ccType: $("#type").val(),
			ccNum: $("#ccNum").val(),
			ccCode: $("#ccCode").val(),
			ccDate: $("#ccDate").val(),
			billStreet: $("#billStreet").val(),
			billCity: $("#billCity").val(),
			billState: $("#billState").val(),
			billZip: $("#billZip").val(),
			shipStreet: $("#shipStreet").val(),
			shipCity: $("#shipCity").val(),
			shipState: $("#shipState").val(),
			shipZip: $("#shipZip").val(),
			total: $("#total").attr("value")
		}, function(data, status) {

			if(data == 0){
				$("#orderFail").html("<h5 style='color:red'>Transaction Was Not Successful!</h5>");				
			}
			if(data == 1){
				$('#orderSuccess').html("<h5 style='color:green'>Order Was Successful</h5>" +
								 "<button onclick='viewOrder()'>Print Order</button><br><br>" +
								 "<div id='viewOrder'></div>");
				placeOrder();
			}
			
		});
    }
    
    function placeOrder() {
    	$.post("PlaceOrder", {}, function(data, status) {
    		$("#viewOrder").html(data).hide();
		});
    }
    
    function viewOrder(){
    	$("#viewOrder").fadeIn(3000);
    }
    </script>
   </head>
   <body>
      <header>
         <img src="${pageContext.request.contextPath}/pics/imaxBanner1.jpg" style="width: 100%" />
         <nav>
         	<a href="Login">Home</a> 
         	<a href="ViewOrders">View Orders</a> 
         	<a href="UpdateShoppingCart">View Cart</a> 
         	<a href="LogOut">Log Out</a>
      	 </nav>
      </header>
      <h1>${user.firstName} ${user.lastName}</h1>
      <div id="orderSuccess">
      <table class="table table-bordered table-striped">
         <thead>
            <th>Movie</th>
            <th># of Tickets</th>
            <th>Total</th>
            <th>Theater Room</th>
         </thead>
         <tbody>
               <c:forEach items="${shoppingCart}" var="order" varStatus="count">
               <tr>
                  <td>${order.movieShowing.movie.title}</td>
                  <td>${order.ticketQuantity}</td>
                  <td>$<fmt:formatNumber type="number" minFractionDigits="2" 
                  maxFractionDigits="2" value="${order.cost}" /></td>
                  <td>${order.movieShowing.showroom.theater.name}</td>
               </tr>
      		   </c:forEach>
         </tbody>
      </table>
      <br>
      <h3 id="total" value="${total}">Total: $<fmt:formatNumber type="number" minFractionDigits="2" 
                  maxFractionDigits="2" value="${total}" /></h3>
      <br>
      <div id="orderFail"></div>
      <div id="ccForm">
            <input id="fName" type="text" placeholder="First Name" name="fName">
            <input id="lName" type="text" placeholder="Last Name" name="lName"><br>
            Select Card Type:<br> 
            <select name="ccType" id="type">
               <option value="visa">Visa</option>
               <option value="masterCard">Master Card</option>
               <option value="discover">Discover</option>
            </select>
            <br>
            <input id="ccNum" type="text" placeholder="Card Number" name="ccNum"><br>
            <input id="ccCode" type="text" placeholder="Security Code" name="secCode">
            <input id="ccDate" type="date" name="date"><br>
            Billing Address:<br>
            <input id="billStreet" type="text" placeholder="Street Address" name="billStreet"><br>
            <input id="billCity" type="text" placeholder="City" name="billCity"> 
            <select id="billState" name="billState">
               <option value="AL">Alabama</option>
               <option value="AK">Alaska</option>
               <option value="AZ">Arizona</option>
               <option value="AR">Arkansas</option>
               <option value="CA">California</option>
               <option value="CO">Colorado</option>
               <option value="CT">Connecticut</option>
               <option value="DE">Delaware</option>
               <option value="DC">District Of Columbia</option>
               <option value="FL">Florida</option>
               <option value="GA">Georgia</option>
               <option value="HI">Hawaii</option>
               <option value="ID">Idaho</option>
               <option value="IL">Illinois</option>
               <option value="IN">Indiana</option>
               <option value="IA">Iowa</option>
               <option value="KS">Kansas</option>
               <option value="KY">Kentucky</option>
               <option value="LA">Louisiana</option>
               <option value="ME">Maine</option>
               <option value="MD">Maryland</option>
               <option value="MA">Massachusetts</option>
               <option value="MI">Michigan</option>
               <option value="MN">Minnesota</option>
               <option value="MS">Mississippi</option>
               <option value="MO">Missouri</option>
               <option value="MT">Montana</option>
               <option value="NE">Nebraska</option>
               <option value="NV">Nevada</option>
               <option value="NH">New Hampshire</option>
               <option value="NJ">New Jersey</option>
               <option value="NM">New Mexico</option>
               <option value="NY">New York</option>
               <option value="NC">North Carolina</option>
               <option value="ND">North Dakota</option>
               <option value="OH">Ohio</option>
               <option value="OK">Oklahoma</option>
               <option value="OR">Oregon</option>
               <option value="PA">Pennsylvania</option>
               <option value="RI">Rhode Island</option>
               <option value="SC">South Carolina</option>
               <option value="SD">South Dakota</option>
               <option value="TN">Tennessee</option>
               <option value="TX">Texas</option>
               <option value="UT">Utah</option>
               <option value="VT">Vermont</option>
               <option value="VA">Virginia</option>
               <option value="WA">Washington</option>
               <option value="WV">West Virginia</option>
               <option value="WI">Wisconsin</option>
               <option value="WY">Wyoming</option>
            </select>
            <br>
            <input id="billZip" type="text" placeholder="Zip" name="billZip"><br>
            Shipping Address:<br>
            <input id="shipStreet" type="text" placeholder="Street Address" name="shipStreet"><br>
            <input id="shipCity" type="text" placeholder="City" name="shipCity"> 
            <select id="shipState" name="shipState">
               <option value="AL">Alabama</option>
               <option value="AK">Alaska</option>
               <option value="AZ">Arizona</option>
               <option value="AR">Arkansas</option>
               <option value="CA">California</option>
               <option value="CO">Colorado</option>
               <option value="CT">Connecticut</option>
               <option value="DE">Delaware</option>
               <option value="DC">District Of Columbia</option>
               <option value="FL">Florida</option>
               <option value="GA">Georgia</option>
               <option value="HI">Hawaii</option>
               <option value="ID">Idaho</option>
               <option value="IL">Illinois</option>
               <option value="IN">Indiana</option>
               <option value="IA">Iowa</option>
               <option value="KS">Kansas</option>
               <option value="KY">Kentucky</option>
               <option value="LA">Louisiana</option>
               <option value="ME">Maine</option>
               <option value="MD">Maryland</option>
               <option value="MA">Massachusetts</option>
               <option value="MI">Michigan</option>
               <option value="MN">Minnesota</option>
               <option value="MS">Mississippi</option>
               <option value="MO">Missouri</option>
               <option value="MT">Montana</option>
               <option value="NE">Nebraska</option>
               <option value="NV">Nevada</option>
               <option value="NH">New Hampshire</option>
               <option value="NJ">New Jersey</option>
               <option value="NM">New Mexico</option>
               <option value="NY">New York</option>
               <option value="NC">North Carolina</option>
               <option value="ND">North Dakota</option>
               <option value="OH">Ohio</option>
               <option value="OK">Oklahoma</option>
               <option value="OR">Oregon</option>
               <option value="PA">Pennsylvania</option>
               <option value="RI">Rhode Island</option>
               <option value="SC">South Carolina</option>
               <option value="SD">South Dakota</option>
               <option value="TN">Tennessee</option>
               <option value="TX">Texas</option>
               <option value="UT">Utah</option>
               <option value="VT">Vermont</option>
               <option value="VA">Virginia</option>
               <option value="WA">Washington</option>
               <option value="WV">West Virginia</option>
               <option value="WI">Wisconsin</option>
               <option value="WY">Wyoming</option>
            </select>
            <br>
            <input id="shipZip" type="text" placeholder="Zip" name="shipZip"><br>
            
            <input name=passAuth id="passAuth" type="password" />
            <button onclick="validateForm()">Submit</button><br>
            <a href="UpdateShoppingCart">            
            <input type="button" value="Cancel Payment" />
            </a>
      </div>
      </div>
      <footer class="footer">
         <div class="container">
            <span style="font: Britannic Bold; font-size: 12px; color: white">IMAX®
            and The IMAX Experience® are trademarks of IMAX Corporation.</span><br>
            <span style="font: Britannic Bold; font-size: 12px; color: white">
            <b>TO THE MAX!</b></span>
         </div>
      </footer>
   </body>
</html><%--
   Created by IntelliJ IDEA.
   User: Matt
   Date: 1/20/2018
   Time: 10:09 AM
   To change this template use File | Settings | File Templates.
   --%>
<%@ page contentType="text/html;charset=UTF-8" language="java"%>
<%@ taglib uri = "http://java.sun.com/jsp/jstl/core" prefix = "c" %>
<html>
   <head>
      <title>Home</title>
      <link
         href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
         rel="stylesheet"
         integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
         crossorigin="anonymous">
      <link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/CSS/customer.css">
   </head>
   <body>
      <header>
         <img src="${pageContext.request.contextPath}/pics/imaxBanner1.jpg" style="width: 100%" />
         <nav>
         	<a href="Login">Home</a> 
         	<a href="ViewOrders">View Orders</a> 
         	<a href="UpdateShoppingCart">View Cart</a> 
         	<a href="LogOut">Log Out</a>
      	 </nav>
      </header>
      <div class="main">
      <h1>Welcome ${user.firstName}</h1>
         
      </div>
      <div id="movieSearch">
            <form name="movieSearch" action="MovieSearchQuery" method="post">
               Select Your Theater:<br> 
               <select name="theaters">
                  <c:forEach items="${theaters}" var="theater">
         				<option value="${theater.name}">${theater.name}</option>
      			  </c:forEach>
               </select>
               <br> Movie Search:<br> 
               <input type="text" name="search"><br>
               Pick A Show Date:<br>
               <input type="date" name="showDate"><br>
               <input type="submit">
            </form>
         </div><footer class="footer">
         <div class="container">
            <span style="font: Britannic Bold; font-size: 12px; color: white">IMAX®
            and The IMAX Experience® are trademarks of IMAX Corporation.</span><br>
            <span style="font: Britannic Bold; font-size: 12px; color: white">
            <b>TO THE MAX!</b></span>
         </div>
      </footer>
   </body>
</html><%--
   Created by IntelliJ IDEA.
   User: Matt
   Date: 1/20/2018
   Time: 9:57 AM
   To change this template use File | Settings | File Templates.
   --%>
<%@ page contentType="text/html;charset=UTF-8" language="java"%>
<html>
   <head>
      <title>Movie Review</title>
      <link rel="stylesheet" type="text/css" href="CSS/customer.css">
      <link
         href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
         rel="stylesheet"
         integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
         crossorigin="anonymous">
   </head>
   <body>
      <header>
         <img src="pics/imaxBanner1.jpg" style="width: 100%" />
         <nav>
         	<a href="Login">Home</a> 
         	<a href="ViewOrders">View Orders</a> 
         	<a href="UpdateShoppingCart">View Cart</a> 
         	<a href="LogOut">Log Out</a>
      	 </nav>
      </header>
      <h1>${user.firstName} ${user.lastName}</h1>
      <main role="main" class="container">
         <div id="ReviewForm">
            <form id="ReviewForm" action="CustomerReviewServlet"
               method="post" name="reviewForm">
               <fieldset>
                  <legend>Customer Review</legend>
                  <b>Review:</b><br> <input type="text" name="review" style="width:30vw; margin:5px"><br>
                  <b style="margin: 5px">Rating:</b>
                  <select name="rating" style="margin: 5px">
                  	<option value="1">1</option>
                  	<option value="2">2</option>
                  	<option value="3">3</option>
                  	<option value="4">4</option>
                  	<option value="5">5</option>
                  </select> <br> 
                     <input type="submit">
               </fieldset>
            </form>
         </div>
      </main>
      <footer class="footer">
         <div class="container">
            <span style="font: Britannic Bold; font-size: 12px; color: white">IMAX®
            and The IMAX Experience® are trademarks of IMAX Corporation.</span><br>
            <span style="font: Britannic Bold; font-size: 12px; color: white">
            <b>TO THE MAX!</b></span>
         </div>
      </footer>
   </body>
</html><%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
   <head>
      <title>Movie Review</title>
      <link rel="stylesheet" type="text/css" href="CSS/customer.css">
      <link
         href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
         rel="stylesheet"
         integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
         crossorigin="anonymous">
   </head>
   <body>
      <header>
         <img src="pics/imaxBanner1.jpg" style="width: 100%" />
         <nav>
         	<a href="Login">Home</a> 
         	<a href="ViewOrders">View Orders</a> 
         	<a href="UpdateShoppingCart">View Cart</a> 
         	<a href="LogOut">Log Out</a>
      	 </nav>
      </header>
      <h1>${user.firstName} ${user.lastName}</h1><br>
      <h2>${reviewMessage}</h2>
</body>
</html><%--
   Created by IntelliJ IDEA.
   User: Matt
   Date: 1/20/2018
   Time: 10:14 AM
   To change this template use File | Settings | File Templates.
   --%>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib uri = "http://java.sun.com/jsp/jstl/core" prefix = "c" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<html>
   <head>
      <title>Title</title>
      <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" 
         integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" 
         crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/CSS/customer.css">
   </head>
   <body>
      <header>
         <img src="${pageContext.request.contextPath}/pics/imaxBanner1.jpg" style="width: 100%" />
         <nav>
         	<a href="Login">Home</a> 
         	<a href="ViewOrders">View Orders</a> 
         	<a href="UpdateShoppingCart">View Cart</a> 
         	<a href="LogOut">Log Out</a>
      	 </nav>
      </header>
      <h1>${user.firstName} ${user.lastName}</h1>
      <h2>Order #: ${orderId}</h2>
      <table class="table table-bordered table-striped">
         <thead>
            <th>Movie</th>
            <th># of Tickets</th>
            <th>Total</th>
            <th>Theater: Number</th>
            <th>Showtime</th>
            <th></th>
            <th></th>
         </thead>
         <tbody>
              <c:forEach items="${orderItems}" var="order" varStatus="count">
         		<tr>
               <td>${order.movieShowing.movie.title}</td>
               <td>${order.ticketQuantity}</td>
               <td>$<fmt:formatNumber type="number" minFractionDigits="2" 
                  maxFractionDigits="2" value="${order.ticketQuantity * order.movieShowing.cost}" />
               </td>
               <td>${order.movieShowing.showroom.theater.name}</td>
               <td>${order.movieShowing.startTime}</td>
                  <td> 
                  	   <form action="MovieSearchResults" method="post">
                  			<input type="submit" name="buttons${count.index}" value="View">
                  	   </form>
                  </td>
                  <td> 
                  	   <form action="CancelOrder" method="post">
                  			<input type="submit" name="button${count.index}" value="Cancel">
                  	   </form>
                  </td>
               </tr>
      		  </c:forEach>
         </tbody>
      </table>
      <br>
      <h2> Order Total: $<fmt:formatNumber type="number" minFractionDigits="2" 
                  maxFractionDigits="2" value="${singleOrder.cost}"/>
      </h2>
      <h2> Order Date: ${singleOrder.date} </h2>
      <footer class="footer">
         <div class="container">
            <span style="font: Britannic Bold; font-size: 12px; color: white">IMAX®
            and The IMAX Experience® are trademarks of IMAX Corporation.</span><br>
            <span style="font: Britannic Bold; font-size: 12px; color: white">
            <b>TO THE MAX!</b></span>
         </div>
      </footer>
   </body>
</html><%--
   Created by IntelliJ IDEA.
   User: Matt
   Date: 1/20/2018
   Time: 10:09 AM
   To change this template use File | Settings | File Templates.
   --%>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib uri = "http://java.sun.com/jsp/jstl/core" prefix = "c" %>
<html>
   <head>
      <title>Details</title>
      <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" 
         integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" 
         crossorigin="anonymous">
         <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/CSS/customer.css">

<script>
function addToCart(){
	
	$.post("UpdateShoppingCart", {
		ticketQty: $("#ticketQty").val(),
		checkOut: "0"
	}, function(data, status) {

		if(data == 1){
			$('#ticketOrder').html("<h5 style='color:green'>Movie Added To Cart</h5>" +
							 "<form action='UpdateShoppingCart' method='post'> " +
						     "  	<input type='submit' value='View Cart'> " +
						      "</form>");
		}
		else {
			$("#error").text(data);
		}
		
	});
}

function reviewForm(){
	var reviewHtml = "<b>Review:</b><br> <input type='text' id='review' style='width:30vw; margin:5px'><br> " +
    				 "<b style='margin: 5px'>Rating:</b>" +
    				 "<select id='rating' style='margin: 5px'> " +
    				 "<option value='1'>1</option>" +
    				 "<option value='2'>2</option>" +
    				 "<option value='3'>3</option>" +
    	 			 "<option value='4'>4</option>" +
    				 "<option value='5'>5</option>" +
    				 "</select> <br> " +
       				 "<button onclick='addReview()'>Submit Review</button>";
	$("#reviewForm").html(reviewHtml);
}

function addReview(){
	$.post("CustomerReviewServlet", {
		review: $("#review").val(),
		rating: $("#rating").val()
	}, function(data, status) {
		if(data == 0){
			$("#reviewForm").html("<h4 style='color: red'>An Error Occured Submitting Your Review</h4>");
		}
		else {
			$("#movieReviews").html(data).hide().fadeIn(3000);
		}
		
	});
}
</script>
   </head>
   <body>
      <header>
         <img src="${pageContext.request.contextPath}/pics/imaxBanner1.jpg" style="width: 100%" />
         <nav>
         	<a href="Login">Home</a> 
         	<a href="ViewOrders">View Orders</a> 
         	<a href="UpdateShoppingCart">View Cart</a> 
         	<a href="LogOut">Log Out</a>
      	 </nav>
      </header>
      <h1>${user.firstName} ${user.lastName}</h1>
      <div class="container">
         <div id="main" class="row">
            <div class="col-md-5">
               <img src="data:image/gif; base64,${movie.movie.thumbnail}" style="height:50vh; max-width: 30vw"><br>
            </div>
            <div class="col-md-7">
               <h1>${movie.movie.title}</h1>
               <p>${movie.movie.description}
               </p>
                  <h3>Rating: ${movie.movie.rating}</h3>
            </div>
         </div><br>
         <div class="row">
            <div class="col-md-1">
            </div>
            <div class="col-md-10">
               <div id="ticketOrder">
                  <table class="table table-bordered">
                     <thead>
                        <th>Theater</th>
                        <th>Showtime</th>
                        <th>Price</th>
                        <th>Seats Left</th>
                     </thead>
                     <tbody>
                        <td>${movie.showroom.theater.name}</td>
                        <td>${movie.startTime}</td>
                        <td>$<fmt:formatNumber type="number" minFractionDigits="2" 
                  		maxFractionDigits="2" value="${movie.cost}"/></td>
                        <td>${movie.showroom.capacity - movie.numOfPurchasedSeats}</td>
                     </tbody>
                  </table>
                  <h4 style="color:red" id="error"></h4>
                  <h5>Ticket Quantity: 
					<select name="ticketQty" id="ticketQty">
					<option value="1">1</option>
					<option value="2">2</option>
					<option value="3">3</option>
					<option value="4">4</option>
					<option value="5">5</option>
					</select></h5>
                  <button onclick="addToCart()">Add To Cart</button><br><br>
               </div>
            </div>
            <div class="col-md-1">
            </div>
         </div>
         <div class="row">
            <div class="col-md-1">
            </div>
            <div class="col-md-10">
            <button onclick="reviewForm()">Add Review</button>
            <div id="reviewForm"></div>
            <div id="movieReviews">
               <table class="table table-bordered">
                  <tbody id="reviews">
                  <c:forEach items="${reviews}" var="review" end="5">
         		  <tr>
                  <td>${review.user.firstName} ${review.user.lastName}</td>
                  <td>${review.date}</td>
                  <td>${review.content}</td>
                  <td>${review.rating}</td>
               </tr>
      		   </c:forEach>
                  </tbody>
               </table>
               </div>
            </div>
            <div class="col-md-1">
            </div>
         </div>
      </div>
      <footer class="footer">
         <div class="container">
            <span style="font: Britannic Bold; font-size: 12px; color: white">IMAX®
            and The IMAX Experience® are trademarks of IMAX Corporation.</span><br>
            <span style="font: Britannic Bold; font-size: 12px; color: white">
            <b>TO THE MAX!</b></span>
         </div>
      </footer>
   </body>
</html><%--
   Created by IntelliJ IDEA.
   User: Matt
   Date: 1/20/2018
   Time: 10:09 AM
   To change this template use File | Settings | File Templates.
   --%>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>

<%@ taglib uri = "http://java.sun.com/jsp/jstl/core" prefix = "c" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<html>
   <head>
      <title>Results</title>
      <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" 
         integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" 
         crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/CSS/customer.css">
   </head>
   <body>
      <header>
         <img src="${pageContext.request.contextPath}/pics/imaxBanner1.jpg" style="width: 100%" />
         <nav>
         	<a href="Login">Home</a> 
         	<a href="ViewOrders">View Orders</a> 
         	<a href="UpdateShoppingCart">View Cart</a> 
         	<a href="LogOut">Log Out</a>
      	 </nav>
      </header>
      <h1>${user.firstName} ${user.lastName}</h1>
      <div id="main">
         <table class="table table-bordered table-striped" 
            id="results">
            <thead>
               <th>Theater Name</th>
               <th>Room Number</th>
               <th>Showtime</th>
               <th>Seats Available</th>
               <th>Price</th>
               <th>Poster</th>
               <th>Details</th>
            </thead>
            <tbody>
               <c:forEach items="${movieShowings}" var="movieShowing" varStatus="count" end="4">
         		  <tr>
                  <td>${movieShowing.showroom.theater.name}</td>
                  <td>${movieShowing.movie.title}</td>
                  <td>${movieShowing.startTime}</td>
                  <td>${movieShowing.showroom.capacity - movieShowing.numOfPurchasedSeats}</td>
                  <td>$<fmt:formatNumber type="number" minFractionDigits="2" 
                  maxFractionDigits="2" value="${movieShowing.cost}" /></td>
                  <td><img src="data:image/gif; base64,${movieShowing.movie.thumbnail}" style="max-height: 75px"></td>
                  <td> 
                  	   <form action="MovieSearchResults" method="post">
                  			<input type="submit" name="button${count.index}" value="View Details">
                  	   </form>
                  </td>
               </tr>
      		   </c:forEach>
            </tbody>
         </table>
      </div>
      <footer class="footer">
         <div class="container">
            <span style="font: Britannic Bold; font-size: 12px; color: white">IMAX®
            and The IMAX Experience® are trademarks of IMAX Corporation.</span><br>
            <span style="font: Britannic Bold; font-size: 12px; color: white">
            <b>TO THE MAX!</b></span>
         </div>
      </footer>
   </body>
</html><%--
   Created by IntelliJ IDEA.
   User: Matt
   Date: 1/20/2018
   Time: 10:10 AM
   To change this template use File | Settings | File Templates.
   --%>
<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<%@ taglib uri = "http://java.sun.com/jsp/jstl/core" prefix = "c" %>
<html>
   <head>
      <title>View Cart</title>
      <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" rel="stylesheet" 
         integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" 
         crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/CSS/customer.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<script>
function remove(element){
	var index = element.value;
	
	$.post("Checkout", {
		removeItem: index
	}, function(data, status) {
		$("#cartInfo").html(data).hide().fadeIn(3000);
	});
}
</script>
   </head>
   <body>
      <header>
         <img src="${pageContext.request.contextPath}/pics/imaxBanner1.jpg" style="width: 100%" />
         <nav>
         	<a href="Login">Home</a> 
         	<a href="ViewOrders">View Orders</a> 
         	<a href="UpdateShoppingCart">View Cart</a> 
         	<a href="LogOut">Log Out</a>
      	 </nav>
      </header>
      <h1>${user.firstName} ${user.lastName}</h1>
      <div class="main">
      <h3 style="color:red">${orderError}</h3>
      <h1 style="color:red">${cartError}</h1>
      <div id="cartInfo">
         <table class="table table-bordered table-striped">
            <thead>
               <th>Movie</th>
               <th>Poster</th>
               <th>Theater</th>
               <th>Showtime</th>
               <th># of Tickets</th>
               <th>Total</th>
               <th>Remove</th>
            </thead>
            <tbody>
              <c:forEach items="${shoppingCart}" var="order" varStatus="count">
               <tr>
                  <td>${order.movieShowing.movie.title}</td>
                  <td><img src="data:image/gif; base64,${order.movieShowing.movie.thumbnail}" style="max-height: 75px"></td>
                  <td>${order.movieShowing.showroom.theater.name}</td>
                  <td>${order.movieShowing.startTime}</td>
                  <td>${order.ticketQuantity}</td>
                  <td>$<fmt:formatNumber type="number" minFractionDigits="2" 
                  maxFractionDigits="2" value="${order.cost}" /></td>
                  <td>
                  <button onclick='remove(this)'  value='${count.index}'>Remove</button>
                  </td>
               </tr>
      		   </c:forEach>
            </tbody>
         </table>
         <form action="Checkout" method="post">
            <h3>Total: $<fmt:formatNumber type="number" minFractionDigits="2" 
                  maxFractionDigits="2" value="${total}" /></h3>
            <br>
            <input type="submit" value="Checkout">
         </form>
         </div>
      </div>
      <footer class="footer">
         <div class="container">
            <span style="font: Britannic Bold; font-size: 12px; color: white">IMAX®
            and The IMAX Experience® are trademarks of IMAX Corporation.</span><br>
            <span style="font: Britannic Bold; font-size: 12px; color: white">
            <b>TO THE MAX!</b></span>
         </div>
      </footer>
   </body>
</html><%--
   Created by IntelliJ IDEA.
   User: Matt
   Date: 1/20/2018
   Time: 10:11 AM
   To change this template use File | Settings | File Templates.
   --%>
<%@ page contentType="text/html;charset=UTF-8" language="java"%>
<%@ taglib uri = "http://java.sun.com/jsp/jstl/core" prefix = "c" %>
<%@ taglib prefix="fmt" uri="http://java.sun.com/jsp/jstl/fmt" %>
<html>
   <head>
      <title>Title</title>
      <link
         href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
         rel="stylesheet"
         integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
         crossorigin="anonymous">
<link rel="stylesheet" type="text/css" href="${pageContext.request.contextPath}/CSS/customer.css">
   </head>
   <body>
      <header>
         <img src="${pageContext.request.contextPath}/pics/imaxBanner1.jpg" style="width: 100%" />
         <nav>
         	<a href="Login">Home</a> 
         	<a href="ViewOrders">View Orders</a> 
         	<a href="UpdateShoppingCart">View Cart</a> 
         	<a href="LogOut">Log Out</a>
      	 </nav>
      </header>
      <h1>${user.firstName} ${user.lastName}</h1>
      <table class="table table-bordered table-striped">
         <thead>
            <th>Order Number</th>
            <th>Total</th>
            <th>Date</th>
            <th></th>
         </thead>
         <tbody>
         ${noOrders}
              <c:forEach items="${pastOrders}" var="order">
         		<tr>
                  <td>${order.id}</td>
                  <td>
                  $<fmt:formatNumber type="number" minFractionDigits="2" 
                  maxFractionDigits="2" value="${order.cost}" />
                  </td>
                  <td>${order.date}</td>
                  <td> 
                  	   <form action="ManageOrder" method="post">
                  			<input type="submit" name="button" value="View Order ${order.id}">
                  	   </form>
                  </td>
               </tr>
      		  </c:forEach>
         </tbody>
      </table>
      <br>
      <footer class="footer">
         <div class="container">
            <span style="font: Britannic Bold; font-size: 12px; color: white">IMAX®
            and The IMAX Experience® are trademarks of IMAX Corporation.</span><br>
            <span style="font: Britannic Bold; font-size: 12px; color: white">
            <b>TO THE MAX!</b></span>
         </div>
      </footer>
   </body>
</html>